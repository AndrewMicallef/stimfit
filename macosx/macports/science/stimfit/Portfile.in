# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                stimfit
version             0.11.5
categories          science
platforms           darwin
license             GPL
maintainers         gmx.de:christsc
description         Electrophysiology analysis suite
long_description    A program for viewing and analyzing electrophysiological data
homepage            http://www.stimfit.org
master_sites        https://stimfit.googlecode.com/files/ \
                    file:///Users/cs/stimfit/build/release/

checksums           rmd160  RMD160 \
                    sha256  SHA256

universal_variant   no

supported_archs     x86_64
 
depends_lib         port:boost \
                    port:fftw-3 \
                    port:hdf5-18 \
                    port:wxWidgets30 \
                    port:swig-python

configure.args      --with-wx-config=${prefix}/bin/wx-config \
                    --disable-dependency-tracking \
                    --disable-python \
                    CC="`${prefix}/bin/wx-config --cc`" \
                    CXX="`${prefix}/bin/wx-config --cxx`" \
                    LD="`${prefix}/bin/wx-config --ld`"

variant python27 description {Build with Python shell. Only 2.7 is supported.} {
    depends_lib-append \
        port:python27 \
        port:py27-wxpython30 \
        port:py27-numpy \
        port:py27-matplotlib

    configure.python \
        ${prefix}/bin/python2.7

    configure.args-delete \
        --disable-python

    configure.args-append \
        --enable-python
}

configure.ldflags-append \
                    -headerpad_max_install_names

if {![variant_isset python27]} {
    default_variants +python27
}

destroot.destdir    DESTDIR=${destroot}${applications_dir}
